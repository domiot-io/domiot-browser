/*! Repository: https://github.com/domiot-io/domiot-browser */
class HTMLElementCollection{constructor(){this._obj={}}_isHTMLElementSubclass(e){return"function"==typeof e&&e.prototype instanceof HTMLElement}add(e,t){if(!e||"string"!=typeof e)throw new Error("Mandatory 'tagName' of type string when adding a new element to HTMLElementCollection.");if(!t||!this._isHTMLElementSubclass(t))throw new Error("Only objects of type HTMLElement are allowed in HTMLElementCollection.");this._obj[e]=t}remove(e){delete this._obj[e]}get(e){return this._obj[e]}[Symbol.iterator](){const e=Object.keys(this._obj);let t=0;const n=this._obj;return{next(){if(t<e.length){const o=e[t++];return{value:[o,n[o]],done:!1}}return{done:!0}}}}}const DOMIoT=function(e=[],t="ws://localhost:8080"){if(e)if(e instanceof HTMLElementCollection)e=[e];else{let t=!0;if(Array.isArray(e))for(let n=0;n<e.length;n++){if(!(e[n]instanceof HTMLElementCollection)){t=!1;break}}else t=!1;if(!t)throw new Error("DOMIoT second constructor argument `elementFactoryCollection` must be of type HTMLElementFactoryCollection or Array of HTMLElementFactoryCollection.")}const n=new BindingDriverCom(t);function o(e,t,n,o){const i=e.getAttribute("binding");if(!i)return;i.split(" ").forEach(i=>{const[s,r]=l(i,e);s&&s.elementAttributeModified&&s.elementAttributeModified(r,e,t,n,o)})}function i(e,t,n,o,i){const s=e.getAttribute("binding");if(!s)return;s.split(" ").forEach(s=>{const[r,c]=l(s,e);r&&r.elementAttributeNSModified&&r.elementAttributeNSModified(c,e,t,n,o,i)})}function s(e,t,n,o){const i=e.getAttribute("binding");if(!i)return;i.split(" ").forEach(i=>{const[s,r]=l(i,e);s&&s.elementStyleModified&&s.elementStyleModified(r,e,t,n,o)})}function l(e,t){if(!e)return[null,null];let n=null,o=null;const i=e.match(/^(.*):(\d+)$/);i?(n=i[1],o=t&&t.bindings&&void 0!==t.bindings[n]?t.bindings[n]:parseInt(i[2],10)):(n=e,o=t&&t.bindings&&void 0!==t.bindings[n]?t.bindings[n]:null);return[document.getElementById(n),o]}function r(e,t){for(let n=0;n<t.length;n++){const o=t[n];s(e,o,t.getPropertyValue(o))}}n.connect(),function(){e&&function(e){e.forEach(e=>{for(const[t,n]of e)try{customElements.define(t,n)}catch(e){console.error(`Failed to define custom element '${t}':`,e)}})}(e);(function(){const e=Element.prototype.setAttribute;Element.prototype.setAttribute=function(t,n){const i=this.getAttribute(t),s=e.call(this,t,n);return o(this,t,n,i),s};const t=Element.prototype.setAttributeNS;Element.prototype.setAttributeNS=function(e,n,o){const s=this.getAttributeNS(e,n),l=t.call(this,e,n,o);return i(this,e,n,o,s),l};const n=Element.prototype.removeAttribute;Element.prototype.removeAttribute=function(e){const t=this.getAttribute(e),i=n.call(this,e);return null!==t&&o(this,e,null,t),i};const l=Element.prototype.removeAttributeNS;Element.prototype.removeAttributeNS=function(e,t){const n=this.getAttributeNS(e,t),o=l.call(this,e,t);return null!==n&&i(this,e,t,null,n),o};const r=HTMLElement.prototype,c=Object.getOwnPropertyDescriptor(r,"style");c&&c.get&&Object.defineProperty(r,"style",{get:function(){const e=c.get.call(this);if(!this._domiotProxiedStyle){e._ownerElement=this;const t=e.setProperty;e.setProperty=function(e,n,o){const i=this.getPropertyValue(e),l=t.call(this,e,n,o);return s(this._ownerElement,e,n,i),l};const n=e.removeProperty;e.removeProperty=function(e){const t=this.getPropertyValue(e),o=n.call(this,e);return t&&s(this._ownerElement,e,"",t),o};const o=new Proxy(e,{set:function(e,t,n){if("symbol"==typeof t||"length"===t||"parentRule"===t||t.startsWith("_")||"setProperty"===t||"removeProperty"===t||"function"==typeof e[t])return Reflect.set(e,t,n);const o=e[t],i=Reflect.set(e,t,n);return"string"==typeof t&&t in e&&s(e._ownerElement,t,n,o),i},get:function(e,t,n){try{const o=Reflect.get(e,t,n);return"function"==typeof o?o.bind(e):o}catch(e){return null}}});this._domiotProxiedStyle=o}return this._domiotProxiedStyle},configurable:c.configurable,enumerable:c.enumerable})})(),function(){let e={};const t=document.querySelectorAll("[binding]");for(const n of t){const t=n.getAttribute("binding");if(!t)continue;t.split(" ").forEach(t=>{const[o,i]=l(t);if(o){if(o.id&&!e[o.id]&&(e[o.id]=o),o.elementsWithoutIndex)return o.lastIndex=o.lastIndex+1,o.elementsWithoutIndex.set(o.lastIndex,n),n.bindings||(n.bindings={}),void(n.bindings[o.id]=o.lastIndex);if(null!=i)o.tmpElements||(o.tmpElements=new Map,o.elementsIndexes=[]),o.elementsIndexes.push(i),o.tmpElements.set(i,n),n.bindings||(n.bindings={}),n.bindings[o.id]=i;else{if(o.elementsWithoutIndex=new Map,o.lastIndex=-1,o.tmpElements){for(const[e,t]of o.tmpElements)o.lastIndex=o.lastIndex+1,o.elementsWithoutIndex.set(o.lastIndex,t),t.bindings||(t.bindings={}),t.bindings[o.id]=o.lastIndex;delete o.elementsIndexes,delete o.tmpElements}o.lastIndex=o.lastIndex+1,o.elementsWithoutIndex.set(o.lastIndex,n),n.bindings||(n.bindings={}),n.bindings[o.id]=o.lastIndex}}})}for(const t in e){const o=e[t];o.elementsWithoutIndex?(o.elements=o.elementsWithoutIndex,delete o.elementsWithoutIndex):(o.elements||(o.elements=new Map),o.elementsIndexes.sort((e,t)=>e-t),o.elementsIndexes.forEach(e=>{o.elements.set(e,o.tmpElements.get(e))}),delete o.elementsIndexes,delete o.tmpElements),o.bdcom=n,o.dispatchEvent(new Event("load"))}}();const t=document.querySelectorAll("[style]");for(const e of t)r(e,e.style)}()};